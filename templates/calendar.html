{% extends "layout.html" %}
{% block content %}

<style>
.calendar-header{
    display:flex;
    justify-content:space-between;
    align-items:center;
    margin-bottom:18px;
}

.calendar-header h4{
    font-weight:700;
    color:#0b3d91;
}

.calendar-grid{
    display:grid;
    grid-template-columns:repeat(4,1fr);
    gap:18px;
}

.month-box{
    background:#fff;
    border-radius:14px;
    padding:10px;
    box-shadow:0 6px 16px rgba(0,0,0,.15);
    animation:fadeIn .5s ease;
}

@keyframes fadeIn{
    from{opacity:0; transform:scale(.95)}
    to{opacity:1; transform:scale(1)}
}

.month-title{
    text-align:center;
    font-weight:600;
    color:#0b3d91;
    margin-bottom:6px;
}

.weekdays,.days{
    display:grid;
    grid-template-columns:repeat(7,1fr);
    text-align:center;
}

.weekdays div{
    font-size:11px;
    font-weight:600;
    color:#444;
}

.day{
    font-size:12px;
    padding:6px;
    margin:1px;
    border-radius:6px;
    cursor:pointer;
    position:relative;
}

/* Weekend highlight */
.weekend{
    background:#f1f3f5;
    color:#555;
}

/* Government holidays */
.ada{background:#22c55e;color:#fff;}
.rh{background:#facc15;}
.today{
    border:2px solid #0b3d91;
}

/* Tooltip */
.day:hover::after{
    content:attr(data-tip);
    position:absolute;
    bottom:120%;
    left:50%;
    transform:translateX(-50%);
    background:#000;
    color:#fff;
    font-size:10px;
    padding:4px 6px;
    border-radius:4px;
    white-space:nowrap;
    z-index:10;
}
</style>

<div class="calendar-header">
    <h4>ðŸ“… Yearly Calendar</h4>

    <select id="yearSelect" class="form-select form-select-sm" style="width:120px"></select>
</div>

<div class="calendar-grid" id="calendarGrid"></div>

<script>
const months = [
 "January","February","March","April","May","June",
 "July","August","September","October","November","December"
];

const yearSelect = document.getElementById("yearSelect");
const grid = document.getElementById("calendarGrid");

// Government holidays (ADA / RH)
const adaHolidays = {
 "2026-01-01":"New Year",
 "2026-08-15":"Independence Day"
};

const rhHolidays = {
 "2026-01-26":"Republic Day"
};

// Populate years
const currentYear = new Date().getFullYear();
for(let y=2024;y<=2032;y++){
    yearSelect.innerHTML += `<option ${y===currentYear?"selected":""}>${y}</option>`;
}

yearSelect.onchange = () => renderCalendar(yearSelect.value);

function renderCalendar(year){
    grid.innerHTML="";
    const today = new Date();

    months.forEach((month,idx)=>{
        const box=document.createElement("div");
        box.className="month-box";

        box.innerHTML=`
            <div class="month-title">${month}</div>
            <div class="weekdays">
                <div>Mo</div><div>Tu</div><div>We</div>
                <div>Th</div><div>Fr</div><div>Sa</div><div>Su</div>
            </div>
            <div class="days"></div>
        `;

        const daysDiv=box.querySelector(".days");
        const firstDay=(new Date(year,idx,1).getDay()||7);
        const totalDays=new Date(year,idx+1,0).getDate();

        for(let i=1;i<firstDay;i++){
            daysDiv.innerHTML+="<div></div>";
        }

        for(let d=1;d<=totalDays;d++){
            const dateKey=`${year}-${String(idx+1).padStart(2,"0")}-${String(d).padStart(2,"0")}`;
            let cls="", tip="";
            const weekday=new Date(year,idx,d).getDay();

            if(weekday===0 || weekday===6){
                cls+=" weekend";
            }

            if(adaHolidays[dateKey]){
                cls+=" ada";
                tip=adaHolidays[dateKey];
            }

            if(rhHolidays[dateKey]){
                cls+=" rh";
                tip=rhHolidays[dateKey];
            }

            // Highlight today
            if(year==today.getFullYear() && idx==today.getMonth() && d==today.getDate()){
                cls+=" today";
            }

            daysDiv.innerHTML+=`
                <div class="day ${cls}" data-tip="${tip}">
                    ${d}
                </div>
            `;
        }

        grid.appendChild(box);
    });
}

renderCalendar(currentYear);
</script>

{% endblock %}
